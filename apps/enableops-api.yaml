apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: enableops-api

spec:
  
  project: default
  
  destination:
    server: https://kubernetes.default.svc
    namespace: argocd-apps
  
  syncPolicy:
    automated:
      prune: true
      selfHeal: true
    syncOptions:
      - Validate=true

  source:
    repoURL: https://github.com/AndreiChenchik/dev-cluster
    path: charts/python-app
    targetRevision: HEAD
    helm:
      values: |
        name: enableops-io
        host: api.local
        targetPort: 8000
        image: eu.gcr.io/enableops-io/api:0.6.40
        pullSecret: eu-gcr-io
        envSecret: enableops-api-env


